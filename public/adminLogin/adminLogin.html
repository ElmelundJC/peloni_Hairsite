<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" type="text/css" href="../adminLogin/adminLogin.css">

</head>

<body>

    <div class="main">

        <div class="centered">
            <h1>Velkommen Joan</h1>
            <h1>VÃ¦rsgo at logge ind</h1>

            <form id="loginForm">
                <div class="inputBox">
                    <input type="text" name="email" id="email" autocomplete="off" placeholder="Email">
                </div>
                <div class="inputBox">
                    <input type="password" name="password" id="password" autocomplete="off" placeholder="Password">
                </div>
                <div class="inputBox">
                    <input type="submit" id="loginBtn" value="Login">
                </div>
                <!-- <p class="forget">Forgot Password ? <a href="#">Click Here</a></p> -->
            </form>
        </div>

    </div>

    <script>
        document.querySelector('#loginForm').addEventListener('submit', async (e) => {
        e.preventDefault();
 
        const signupBtn = document.querySelector('#loginBtn');
        const email = document.querySelector('input[name="email"]');
        const password = document.querySelector('input[name="password"]');
   

        console.log(signupBtn);
        console.log(email);
        console.log(password);

        console.log(email.value);
        console.log(password.value);

        const result = await fetch('/api/users/login', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              email: email.value,
              password: password.value,
            })
          })
          .then(res => {
              console.log(res);
            return res.json()
          })
          .then(data => {
            console.log(data)
            if (data.status === 'succes') {
              window.location.href = '/admin'
            } else {
              window.location.href = '/adminLogin'
            }
          })
          .catch(error => console.log(error));
      });
      </script>

</body>

</html>